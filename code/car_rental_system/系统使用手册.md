# 租车管理系统使用手册

## 📋 系统概述

租车管理系统是一个基于Django开发的综合性车辆租赁管理平台，支持车辆管理、客户管理、租赁订单管理等核心业务功能。

### 系统功能
- **车辆管理**: 车辆信息维护、状态管理、搜索筛选
- **客户管理**: 客户信息管理、会员等级、租赁历史
- **租赁管理**: 订单创建、状态跟踪、费用计算
- **数据统计**: 收入统计、业务报表、仪表板

### 技术架构
- **后端**: Django 5.2.8 + Python 3.12
- **数据库**: SQLite (开发) / PostgreSQL (生产)
- **前端**: HTML5 + CSS3 + JavaScript
- **静态资源**: Django静态文件服务

## 🚀 快速开始

### 环境要求
- Python 3.8+
- Django 5.2+
- 浏览器支持现代JavaScript

### 安装步骤

1. **下载项目**
```bash
# 克隆或下载项目到本地
cd /path/to/car_rental_system
```

2. **安装依赖**
```bash
pip install django
```

3. **运行数据库迁移**
```bash
python manage.py migrate
```

4. **创建管理员账户（可选）**
```bash
python manage.py createsuperuser
```

5. **生成测试数据（可选）**
```bash
python create_vehicle_test_data.py
python create_customer_test_data.py
python create_rental_test_data.py
```

6. **启动服务器**
```bash
python manage.py runserver 0.0.0.0:8000
```

7. **访问系统**
- 主页面: http://localhost:8000
- 车辆管理: http://localhost:8000/vehicles/
- 客户管理: http://localhost:8000/customers/
- 租赁管理: http://localhost:8000/rentals/

## 📖 功能使用指南

### 车辆管理

#### 添加车辆
1. 点击"车辆管理"菜单
2. 点击"添加车辆"按钮
3. 填写车辆信息:
   - **车牌号**: 必填，唯一标识
   - **品牌**: 必填，如"宝马"、"奔驰"
   - **型号**: 必填，如"A4"、"X5"
   - **车辆类型**: 必填，如"轿车"、"SUV"
   - **颜色**: 必填，如"白色"、"黑色"
   - **日租金**: 必填，正数金额
4. 点击"保存"按钮

#### 车辆状态管理
- **可用**: 车辆可正常租赁
- **已租**: 车辆正在租赁中
- **维修中**: 车辆维修中不可租赁

#### 搜索和筛选
- 按品牌、型号搜索
- 按状态筛选车辆
- 按价格范围筛选

#### 编辑车辆
1. 点击车辆列表中的"编辑"按钮
2. 修改车辆信息
3. 保存更改

#### 删除车辆
1. 点击"删除"按钮
2. 确认删除操作
**注意**: 有活跃租赁订单的车辆无法删除

### 客户管理

#### 添加客户
1. 点击"客户管理"菜单
2. 点击"添加客户"按钮
3. 填写客户信息:
   - **姓名**: 必填，客户真实姓名
   - **手机号**: 必填，11位手机号码
   - **邮箱**: 选填，有效邮箱地址
   - **身份证号**: 必填，18位身份证号码
   - **驾照号**: 必填，驾驶证号码
   - **驾照类型**: A/B/C类驾照
   - **会员等级**: 普通会员/VIP会员
4. 点击"保存"按钮

#### 会员等级管理
- **普通会员**: 基础会员，无折扣
- **VIP会员**: 享受10%租金折扣

#### 查看客户详情
1. 点击客户列表中的"查看"按钮
2. 查看客户基本信息
3. 查看租赁历史记录
4. 查看消费统计

#### 客户搜索
- 按姓名搜索
- 按手机号搜索
- 按会员等级筛选

### 租赁管理

#### 创建租赁订单
1. 点击"租赁管理"菜单
2. 点击"创建订单"按钮
3. 选择客户和车辆
4. 设置租赁日期:
   - **开始日期**: 租赁开始时间
   - **结束日期**: 租赁结束时间
5. 系统自动计算费用:
   - 基础费用 = 日租金 × 租赁天数
   - VIP客户享受10%折扣
6. 添加备注信息（可选）
7. 点击"创建订单"

#### 订单状态说明
- **预订中**: 订单已创建，等待客户取车
- **进行中**: 客户已取车，正在使用
- **已完成**: 客户已还车，订单完成
- **已取消**: 订单被取消

#### 车辆归还
1. 在订单列表中找到对应订单
2. 点击"归还车辆"按钮
3. 确认实际归还日期
4. 系统自动更新车辆状态为"可用"
5. 更新订单状态为"已完成"

#### 取消订单
1. 在订单列表中找到对应订单
2. 点击"取消订单"按钮
3. 确认取消操作
**注意**: 已开始的订单无法取消

#### 查看订单详情
- 客户信息和联系方式
- 车辆信息和状态
- 租赁日期和费用
- 订单状态和历史

### 数据统计

#### 仪表板查看
主页面显示关键业务指标:
- 车辆统计（总数、可用、已租、维修中）
- 客户统计（总数、普通会员、VIP会员）
- 订单统计（总数、进行中、已完成、已取消）
- 收入统计（总收入、月收入、今日收入）

#### 搜索功能
- 所有模块都支持搜索功能
- 可按关键词搜索相关记录
- 支持状态筛选

## 🔧 系统管理

### 数据导入导出
```python
# 使用Django管理命令
python manage.py dumpdata > backup.json
python manage.py loaddata backup.json
```

### 日志查看
- Django服务器日志在控制台输出
- 错误信息会自动记录
- 建议在生产环境配置日志文件

### 备份建议
- 定期备份数据库文件
- 备份静态文件
- 记录配置变更

## ⚠️ 注意事项

### 数据安全
- 定期备份数据库
- 不要在生产环境使用DEBUG=True
- 及时更新系统和依赖包

### 性能建议
- 避免一次性导入大量数据
- 合理使用搜索和筛选功能
- 定期清理历史数据

### 业务规则
- 车辆状态会自动更新
- 有活跃租赁的车辆无法删除
- VIP客户享受10%租金折扣
- 订单状态转换有严格限制

## 🛠️ 故障排除

### 常见问题

#### 1. 页面显示错误
**现象**: 页面出现500错误
**解决**: 
- 检查数据库是否正常
- 查看Django日志信息
- 确认模板文件存在

#### 2. 搜索无结果
**现象**: 搜索功能返回空结果
**解决**:
- 检查搜索关键词
- 确认数据存在
- 验证搜索字段名称

#### 3. 保存失败
**现象**: 表单保存时出错
**解决**:
- 检查必填字段
- 确认数据格式正确
- 查看错误提示信息

#### 4. 权限问题
**现象**: 无法访问某些功能
**解决**:
- 检查用户权限设置
- 确认URL配置正确
- 验证中间件配置

### 日志分析
```bash
# 查看Django日志
python manage.py runserver 2>&1 | tee django.log

# 分析错误日志
grep -i error django.log
grep -i exception django.log
```

## 📞 技术支持

### 联系方式
- 技术文档: 参阅项目README.md
- 问题反馈: 提交GitHub Issue
- 功能建议: 联系开发团队

### 更新日志
- v1.0: 基础功能完成
- 包含车辆、客户、租赁管理
- 支持数据统计和搜索

### 版本要求
- 最低Python版本: 3.8
- 最低Django版本: 4.0
- 建议使用: Python 3.12 + Django 5.2

---

**文档版本**: v1.0  
**最后更新**: 2025-11-06  
**适用版本**: 租车管理系统 v1.0